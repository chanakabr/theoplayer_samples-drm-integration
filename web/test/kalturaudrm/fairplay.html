<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>KalturaUDRM Fairplay Test</title>
    <link rel="stylesheet" type="text/css" href="/THEOplayer/ui.css">
    <script src="/THEOplayer/THEOplayer.js"></script>
    <script src="/dist/bundle.js"></script>
</head>
<body>
<div id="THEOplayer" class="theoplayer-container video-js theoplayer-skin"></div>
<script type="text/javascript">
    const element = document.querySelector('#THEOplayer');
    const player = new THEOplayer.Player(element, {
        ui: {
            fluid: true
        },
        license:'YOUR_LICENSE_HERE',
        libraryLocation:'/THEOplayer/',
    });

    THEOplayer.registerContentProtectionIntegration(
        'kalturaudrm',
        'fairplay',
        new ContentProtectionIntegrations.KalturaUDRMFairplayContentProtectionIntegrationFactory()
    );

    player.source = {
        sources: [
            {
                src: 'https://d3qvxg3r09ineg.cloudfront.net/out/v1/9a265a5f4c424abf9f796950c8ffdb6c/index.m3u8',
                contentProtection: {
                    fairplay: {
                        certificateURL: 'fairplay.cer',//'https://magycal-kal.s3.eu-west-1.amazonaws.com/fairplay.cer',
                        licenseAcquisitionURL: 'https://preprod.udrmv3.kaltura.com/fps/license?custom_data=eyJjYV9zeXN0ZW0iOiJPVlAiLCJ1c2VyX3Rva2VuIjoiZGpKOE16QTJORFkwTTN5djQzcWVGMWw2YzZwS0JpYU83a3ZRcXllNGpnUWlHaFdiVnZ0bmdNZ2NCbHd6SFBqcmQ2QWJ0TlMtcGVLRlJfREN5ZEl3ckk3dXoxYnRDbFYyNnBpcWtmVEN4RFZRUG5ZSnhGNXZienJ2Z3c9PSIsImFjY291bnRfaWQiOjMwNjQ2NDMsImNvbnRlbnRfaWQiOiIxX2dxaGNxcW16IiwiZmlsZXMiOiIifQ%3D%3D&signature=HBIHVjPgElrlYahbuUYQRuaxLik%3D&sessionId=14f3e440-9737-d360-4ec2-1498ad3f3a08:db9c5066-60d0-f413-8d07-9c583c8d9f3f&clientTag=html5:v7.49&referrer=aHR0cHM6Ly9tYWd5Y2FsLWthbC5zMy5ldS13ZXN0LTEuYW1hem9uYXdzLmNvbS9wbGF5bGlzdF90ZXN0MDEuaHRtbA=='                    },
                    preferredKeySystems: ['fairplay', 'widevine', 'playready'],
                    integration: 'kalturaudrm'//'kalturaudrm'
                }
            }
        ],
    };
</script>
</body>
</html>
